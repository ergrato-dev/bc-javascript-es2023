<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <!-- Background -->
  <rect width="900" height="500" fill="#1a202c"/>

  <!-- Title -->
  <text x="450" y="40" font-family="system-ui, sans-serif" font-size="26" font-weight="bold" fill="#f0db4f" text-anchor="middle">
    flat() vs flatMap()
  </text>

  <!-- Left: flat() example -->
  <g>
    <!-- flat() title -->
    <text x="225" y="80" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#48bb78" text-anchor="middle">
      flat()
    </text>

    <!-- Input -->
    <rect x="100" y="110" width="250" height="50" fill="#2d3748" stroke="#a0aec0" stroke-width="2" rx="5"/>
    <text x="225" y="125" font-family="Courier, monospace" font-size="13" fill="#e2e8f0" text-anchor="middle">
      [1, [2, [3, 4]]]
    </text>
    <text x="225" y="145" font-family="system-ui, sans-serif" font-size="11" fill="#cbd5e0" text-anchor="middle">
      Array anidado
    </text>

    <!-- Arrow -->
    <line x1="225" y1="170" x2="225" y2="210" stroke="#4299e1" stroke-width="3" marker-end="url(#arrowblue)"/>
    <text x="265" y="192" font-family="system-ui, sans-serif" font-size="10" fill="#4299e1" text-anchor="start">
      .flat(2)
    </text>

    <!-- Process -->
    <rect x="100" y="220" width="250" height="60" fill="#2d3748" stroke="#f0db4f" stroke-width="2" rx="5"/>
    <text x="225" y="240" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#f0db4f" text-anchor="middle">
      Proceso de aplanamiento
    </text>
    <text x="115" y="260" font-family="system-ui, sans-serif" font-size="11" fill="#e2e8f0">
      • Profundidad: 2
    </text>
    <text x="115" y="275" font-family="system-ui, sans-serif" font-size="11" fill="#e2e8f0">
      • Crea nuevo array
    </text>

    <!-- Arrow -->
    <line x1="225" y1="290" x2="225" y2="330" stroke="#4299e1" stroke-width="3" marker-end="url(#arrowblue)"/>

    <!-- Output -->
    <rect x="100" y="340" width="250" height="50" fill="#2d3748" stroke="#48bb78" stroke-width="2" rx="5"/>
    <text x="225" y="355" font-family="Courier, monospace" font-size="13" fill="#48bb78" text-anchor="middle">
      [1, 2, 3, 4]
    </text>
    <text x="225" y="375" font-family="system-ui, sans-serif" font-size="11" fill="#cbd5e0" text-anchor="middle">
      Array aplanado
    </text>
  </g>

  <!-- Right: flatMap() example -->
  <g>
    <!-- flatMap() title -->
    <text x="675" y="80" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#48bb78" text-anchor="middle">
      flatMap()
    </text>

    <!-- Input -->
    <rect x="550" y="110" width="250" height="50" fill="#2d3748" stroke="#a0aec0" stroke-width="2" rx="5"/>
    <text x="675" y="125" font-family="Courier, monospace" font-size="13" fill="#e2e8f0" text-anchor="middle">
      [1, 2, 3]
    </text>
    <text x="675" y="145" font-family="system-ui, sans-serif" font-size="11" fill="#cbd5e0" text-anchor="middle">
      Array simple
    </text>

    <!-- Arrow -->
    <line x1="675" y1="170" x2="675" y2="210" stroke="#4299e1" stroke-width="3" marker-end="url(#arrowblue)"/>
    <text x="625" y="192" font-family="system-ui, sans-serif" font-size="10" fill="#4299e1" text-anchor="end">
      .flatMap(x => [x, x*2])
    </text>

    <!-- Process -->
    <rect x="550" y="210" width="250" height="60" fill="#2d3748" stroke="#f0db4f" stroke-width="2" rx="5"/>
    <text x="675" y="230" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#f0db4f" text-anchor="middle">
      Map + Flatten(1)
    </text>
    <text x="565" y="250" font-family="system-ui, sans-serif" font-size="11" fill="#e2e8f0">
      • Transforma cada elemento
    </text>
    <text x="565" y="265" font-family="system-ui, sans-serif" font-size="11" fill="#e2e8f0">
      • Aplana 1 nivel automático
    </text>

    <!-- Arrow -->
    <line x1="675" y1="280" x2="675" y2="310" stroke="#4299e1" stroke-width="3" marker-end="url(#arrowblue)"/>

    <!-- Output -->
    <rect x="550" y="320" width="250" height="50" fill="#2d3748" stroke="#48bb78" stroke-width="2" rx="5"/>
    <text x="675" y="335" font-family="Courier, monospace" font-size="13" fill="#48bb78" text-anchor="middle">
      [1, 2, 2, 4, 3, 6]
    </text>
    <text x="675" y="355" font-family="system-ui, sans-serif" font-size="11" fill="#cbd5e0" text-anchor="middle">
      Array transformado
    </text>
  </g>

  <!-- Comparison box -->
  <rect x="50" y="410" width="800" height="70" fill="#2d3748" stroke="#4299e1" stroke-width="2" rx="5"/>
  <text x="450" y="430" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#4299e1" text-anchor="middle">
    Diferencia Clave
  </text>
  <text x="70" y="455" font-family="system-ui, sans-serif" font-size="12" fill="#e2e8f0">
    • flat(): Solo aplana arrays existentes sin transformar elementos
  </text>
  <text x="70" y="472" font-family="system-ui, sans-serif" font-size="12" fill="#e2e8f0">
    • flatMap(): Transforma elementos Y aplana en un solo paso (más eficiente)
  </text>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4299e1" />
    </marker>
  </defs>
</svg>
